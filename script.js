const translations = {
  en: {
    "brand.name": "Studio Fingerstyle Kitare",
    "brand.tagline": "Modern Fingerstyle Techniques",
    "nav.about": "About the teacher",
    "nav.lessons": "Learn",
    "nav.school": "Guitar school",
    "nav.performances": "Performing",
    "nav.videos": "Techniques",
    "nav.pricing": "Prices",
    "nav.contact": "Contact",

    "hero.eyebrow": "Fingerstyle guitar lessons",
    "hero.title":
      "Learn to master the guitar with <span>modern fingerstyle techniques</span>.",
    "hero.subtitle":
      "One‑to‑one lessons for advanced guitarists or adult beginners. Learn modern fingerstyle, improvisation and how to write your own instrumental arrangements.",
    "hero.ctaPrimary": "Book a free intro lesson",
    "hero.ctaSecondary": "Learn fingerstyle techniques",
    "hero.badge": "Free 45‑minute session",
    "hero.note":
      "In Ljubljana or online.",
    "hero.sessionLabel": "Next available: this week",
    "hero.sessionText":
      "Bring a song you like – together you and Timen turn it into a playable fingerstyle arrangement.",
    "hero.stat1Number": "45–60 min",
    "hero.stat1Label": "Session length",
    "hero.stat2Number": "1 : 1",
    "hero.stat2Label": "Personal plan",
    "hero.stat3Number": "Advanced",
    "hero.stat3Label": "Guitar course",

    "lessons.eyebrow": "Learn",
    "lessons.title": " ",
    "lessons.subtitle": " ",
    "lessons.cards.fingerstyle.title": "Modern fingerstyle techniques",
    "lessons.cards.fingerstyle.body":
      "Percussive hits, independent hands, harmonics and patterns that make solo guitar sound full and rich.",
    "lessons.cards.improv.title": "Improvisation",
    "lessons.cards.improv.body":
      "Improvisation that sounds complete on its own, without any backing track.",
    "lessons.cards.covers.title": "Writing instrumental arrangements",
    "lessons.cards.covers.body":
      "Writing your own instrumental pieces and arrangements.",
    "lessons.cards.originals.title": "Writing original instrumental pieces",
    "lessons.cards.originals.body":
      "Develop your own ideas into complete songs with structure, mood and dynamic fingerstyle textures.",
    "lessons.cards.rhythm.title": "Groove, rhythm & timing",
    "lessons.cards.rhythm.body": "",
    "lessons.cards.mindset.title": "Practice mindset for advanced guitar students",
    "lessons.cards.mindset.body": "",

    "about.eyebrow": "About the teacher",
    "about.title": " ",
    "about.subtitle": " ",
    "about.point1.title": "From music school to fingerstyle",
    "about.point1.body":
      "After learning classical guitar in music school, Timen Stepišnik Perdih focused on modern music. He has played lead and rhythm guitar in several bands and also performed solo in fingerstyle settings, actively developing his craft for over 20 years.<br><br>His fingerstyle sets usually include arrangements of popular songs, pieces written for solo guitar and Timen’s own instrumental compositions. Recordings from performances and original pieces can be heard on his <a href=\"https://www.youtube.com/@timen-music\" target=\"_blank\" rel=\"noopener\" style=\"color: #1a0dab; text-decoration: underline; font-weight: 600;\">YouTube channel</a>.",
    "about.point2.title": "",
    "about.point2.body": "",
    "about.point3.title": "",
    "about.point3.body": "",

    "videos.eyebrow": "Technique preview",
    "videos.title": "Short examples of advanced fingerstyle ideas.",
    "videos.subtitle":
      "Below are placeholder videos — in the live site, these become short clips showing the kind of techniques and arrangements covered in lessons.",
    "videos.items.1.title": "Thumb–melody independence",
    "videos.items.1.body":
      "Keeping a steady bass pattern while the picking fingers play a flowing melody on top.",
    "videos.items.2.title": "Percussive hits & ghost notes",
    "videos.items.2.body":
      "Combine groove, chord stabs and subtle percussion for a modern sound.",
    "videos.items.3.title": "Harmonics & open tunings",
    "videos.items.3.body":
      "Use natural harmonics and creative tunings to get rich, cinematic textures.",
    "videos.items.4.title": "Improvising intros & outros",
    "videos.items.4.body":
      "Simple ideas to start and end songs in a way that feels natural and expressive.",
    "videos.items.5.title": "Turning chord progressions into songs",
    "videos.items.5.body":
      "Take a simple progression and build a full instrumental around it.",
    "videos.items.6.title": "Dynamic phrasing for emotional playing",
    "videos.items.6.body":
      "Use tone, dynamics and space to make even simple lines sound musical.",

    "pricing.eyebrow": "Prices",
    "pricing.title": "45‑ or 60‑minute lessons",
    "pricing.subtitle":
      "The first session is completely free — it focuses on the student's goals, includes some playing and ends with a realistic plan.",

    "pricing.online.label": "Online",
    "pricing.online.title": "Online lessons (video call)",
    "pricing.online.price": "25 € / 45‑minute lesson or 30 € / 60‑minute lesson",
    "pricing.online.item1": "Flexible scheduling",
    "pricing.online.item2": "Use of online materials",

    "pricing.inperson.label": "In person",
    "pricing.inperson.title": "In‑person lessons (Ljubljana)",
    "pricing.inperson.price": "40 € / 45‑minute lesson or 50 € / 60‑minute lesson",
    "pricing.inperson.item1":
      "Ideal for students in Ljubljana",
    "pricing.inperson.item2": "Option to blend online and in‑person sessions",

    "pricing.freeNote":
      "First 45‑minute introductory lesson is free (online or in‑person).",

    "contact.eyebrow": "Contact",
    "contact.title": "Contact about lessons or performances.",
    "contact.subtitle":
      "Visitors can send a short message about lessons, performances or general questions, or email <a href=\"mailto:your.email@example.com\" style=\"color: #1a0dab; text-decoration: underline; font-weight: 600;\">directly</a>. Timen replies with details and possible dates.",
    "contact.note": "",

    "contact.form.nameLabel": "Name",
    "contact.form.emailLabel": "Email",
    "contact.form.formatLabel": "Preferred format",
    "contact.form.formatOnline": "Online",
    "contact.form.formatInPerson": "In person",
    "contact.form.formatEither": "Either",
    "contact.form.messageLabel": "Message",
    "contact.form.submit": "Send message",

    "performances.eyebrow": "Live performances",
    "performances.title": "Solo fingerstyle guitar for events and venues.",
    "performances.subtitle":
      "We offer modern instrumental fingerstyle sets for bars, private events and concerts – as subtle background music or focused listening.",
    "performances.hero.ctaContact": "Ask about a date",
    "performances.stat1Number": "45–90 min",
    "performances.stat1Label": "Typical set length",
    "performances.stat2Number": "Solo",
    "performances.stat2Label": "Fingerstyle guitar",
    "performances.stat3Number": "Events",
    "performances.stat3Label": "bars & concerts",
    "performances.cards.events.title": "Short sets at events",
    "performances.cards.events.body":
      "Instrumental pieces for openings, award segments or breaks between talks – one or two songs that add atmosphere without taking over the event.",
    "performances.cards.bars.title": "Background music for bars & restaurants",
    "performances.cards.bars.body":
      "Longer sets of melodic fingerstyle guitar at conversational volume, suited to wine bars, cafés or relaxed evening venues.",
    "performances.cards.concerts.title": "Solo concert‑style performance",
    "performances.cards.concerts.body":
      "A full concert‑length programme of original pieces and arrangements, ideal for listening‑focused rooms and smaller stages.",
    "performances.cta.text":
      "To get a feel for how the performances sound live, visitors can open our YouTube channel.",
    "performances.cta.button": "YouTube channel",

    "performances.contact.eyebrow": "Booking",
    "performances.contact.title":
      "Ask about dates for solo fingerstyle performances.",
    "performances.contact.subtitle": "",
    "performances.contact.note": "",
    "performances.contact.form.nameLabel": "Name and organisation",
    "performances.contact.form.emailLabel": "Email",
    "performances.contact.form.messageLabel": "Event details and preferred dates",
    "performances.contact.form.messagePlaceholder":
      "Briefly describe the event or venue, possible dates, location and whether the performance is background music or a listening concert.",
    "performances.contact.form.submit": "Send performance enquiry",

    "footer.copy":
      "© <span id=\"year\"></span> Studio Fingerstyle Kitare – Fingerstyle guitar lessons for advanced players.",
    "footer.meta": " ",
  },
  sl: {
    "brand.name": "Studio Fingerstyle Kitare",
    "brand.tagline": "Sodobne fingerstyle tehnike",
    "nav.about": "O učitelju",
    "nav.lessons": "Nauči se",
    "nav.school": "Šola kitare",
    "nav.performances": "Nastopanje",
    "nav.videos": "Tehnike",
    "nav.pricing": "Cenik",
    "nav.contact": "Kontakt",

    "hero.eyebrow": "Ure fingerstyle kitare",
    "hero.title":
      "Nauči se obvladati kitaro z <span>modernimi fingerstyle tehnikami</span>.",
    "hero.subtitle":
      "Individualne ure za napredne kitariste ali odrasle začetnike. Učenci se učijo sodobnega fingerstylea, improvizacije in pisanja lastnih instrumentalnih aranžmajev.",
    "hero.ctaPrimary": "Rezerviraj brezplačno uvodno uro",
    "hero.ctaSecondary": "Nauči se fingerstyle tehnike",
    "hero.badge": "Brezplačna 45‑minutna ura",
    "hero.note":
      "V Ljubljani ali online.",
    "hero.sessionLabel": "Naslednji termin: ta teden",
    "hero.sessionText":
      "Na uvodni uri lahko študent prinese pesem, ki mu je všeč – skupaj se spremeni v fingerstyle aranžma.",
    "hero.stat1Number": "45–60 min",
    "hero.stat1Label": "Dolžina vaje",
    "hero.stat2Number": "1 : 1",
    "hero.stat2Label": "Osebni načrt",
    "hero.stat3Number": "Napredni",
    "hero.stat3Label": "tečaj kitare",

    "lessons.eyebrow": "Nauči se",
    "lessons.title": " ",
    "lessons.subtitle": " ",
    "lessons.cards.fingerstyle.title": "Tehnike sodobnega fingerstylea",
    "lessons.cards.fingerstyle.body":
      "Perkusivni udarci, neodvisno igranje vsake roke, flažoleti in vzorci, ki naredijo solo kitaro polno in bogato.",
    "lessons.cards.improv.title": "Improvizacija",
    "lessons.cards.improv.body":
      "Improvizacija, ki ne potrebuje spremljave.",
    "lessons.cards.covers.title": "Pisanje instrumentalnih aranžmajev",
    "lessons.cards.covers.body":
      "Pisanje lastnih instrumentalnih skladb in priredb.",
    "lessons.cards.originals.title": "Pisanje lastnih instrumentalov",
    "lessons.cards.originals.body":
      "Razvij svoje ideje v celotne skladbe s strukturo, razpoloženjem in dinamičnim fingerstyle zvokom.",
    "lessons.cards.rhythm.title": "Ritem, groove in čas",
    "lessons.cards.rhythm.body": " ",
    "lessons.cards.mindset.title": "Vaje za napredne kitariste",
    "lessons.cards.mindset.body": " ",

    "about.eyebrow": "O učitelju",
    "about.title": " ",
    "about.subtitle": " ",
    "about.point1.title": "Iz šole za glasbo v fingerstyle",
    "about.point1.body":
      "Po učenju v glasbeni šoli se je Timen Stepišnik Perdih osredotočil na sodobno glasbo. Bil je član večih skupin v katerih je igral solo in ritem kitaro, obenem pa je pogosto nastopal tudi v solo fingerstyle izvedbah. Novo znanje aktivno pridobiva že 20 let.<br><br>Fingerstyle izvedbe navadno vključujejo priredbe popularnih pesmi, skladbe, napisane za solo kitaro in Timnove avtorske instrumentalne skladbe. Posnetke z nastopov in avtorskih skladb si lahko ogledate na <a href=\"https://www.youtube.com/@timen-music\" target=\"_blank\" rel=\"noopener\" style=\"color: #1a0dab; text-decoration: underline; font-weight: 600;\">YouTube kanalu</a>.",
    "about.point2.title": "",
    "about.point2.body": "",
    "about.point3.title": "",
    "about.point3.body": "",

    "videos.eyebrow": "Predogled tehnik",
    "videos.title": "Kratki primeri naprednih fingerstyle idej.",
    "videos.subtitle":
      "Spodaj so začasni videi – na končni strani bodo tukaj kratki posnetki tehnik in aranžmajev, ki jih učitelj uporablja pri pouku.",
    "videos.items.1.title": "Neodvisnost palca in melodije",
    "videos.items.1.body":
      "Stalni bas s palcem, medtem ko prsti igrajo tekočo melodijo na vrhu.",
    "videos.items.2.title": "Perkusivni udarci in 'ghost' noti",
    "videos.items.2.body":
      "Združevanje groova, akordov in nežnih perkusij za sodoben zvok.",
    "videos.items.3.title": "Flažoleti in odprte uglasitve",
    "videos.items.3.body":
      "Naravni flažoleti in ustvarjalne uglasitve za bogate, filmske zvočne podobe.",
    "videos.items.4.title": "Improvizirani uvodi in zaključki",
    "videos.items.4.body":
      "Preproste ideje za naravne, glasbene uvode in zaključke skladb.",
    "videos.items.5.title": "Iz akordov v pravo skladbo",
    "videos.items.5.body":
      "Iz preprostega zaporedja akordov zgradiva celoten instrumental.",
    "videos.items.6.title": "Dinamika in fraziranje",
    "videos.items.6.body":
      "Uporaba tona, dinamike in prostora, da tudi enostavne linije zvenijo čustveno.",

    "pricing.eyebrow": "Cenik",
    "pricing.title": "45‑ ali 60‑minutne vaje",
    "pricing.subtitle":
      "Uvodna vaja je popolnoma brezplačna – na njej se pogovorimo o ciljih, nekaj zaigramo in pripravimo realen načrt.",

    "pricing.online.label": "Online",
    "pricing.online.title": "Online ure (video klic)",
    "pricing.online.price": "25 € / 45‑minutna ura ali 30 € / 60‑minutna ura",
    "pricing.online.item1": "Prilagodljiv urnik",
    "pricing.online.item2": "Uporaba online gradiv",

    "pricing.inperson.label": "V živo",
    "pricing.inperson.title": "Ure v živo (Ljubljana)",
    "pricing.inperson.price": "40 € / 45‑minutna ura ali 50 € / 60‑minutna ura",
    "pricing.inperson.item1":
      "Idealno za učence v Ljubljani",
    "pricing.inperson.item2": "Možnost kombiniranja online in ur v živo",

    "pricing.freeNote":
      "Prva 45‑minutna uvodna ura je brezplačna (online ali v živo).",

    "contact.eyebrow": "Kontakt",
    "contact.title": "Kontakt za vprašanja glede učnih ur ali nastopov.",
    "contact.subtitle": "Uporabite obrazec ali pošljite sporočilo na <a href=\"mailto:your.email@example.com\" style=\"color: #1a0dab; text-decoration: underline; font-weight: 600;\">email</a>.",
    "contact.form.nameLabel": "Ime",
    "contact.form.emailLabel": "Email",
    "contact.form.formatLabel": "Način učenja",
    "contact.form.formatOnline": "Online",
    "contact.form.formatInPerson": "V živo",
    "contact.form.formatEither": "Kakorkoli",
    "contact.form.messageLabel": "Sporočilo",
    "contact.form.submit": "Pošlji sporočilo",

    "performances.contact.eyebrow": "Rezervacije",
    "performances.contact.title":
      "Povpraševanje za nastop solo fingerstyle kitare.",
    "performances.contact.subtitle": "",
    "performances.contact.note": "",
    "performances.contact.form.nameLabel": "Ime in organizacija",
    "performances.contact.form.emailLabel": "Email",
    "performances.contact.form.messageLabel":
      "Opis dogodka in želeni termini",
    "performances.contact.form.messagePlaceholder":
      "Na kratko opišite dogodek ali lokal, možne termine, lokacijo ter ali gre za glasbeno podlago ali poslušalni koncert.",
    "performances.contact.form.submit": "Pošlji povpraševanje za nastop",

    "performances.eyebrow": "Nastopi v živo",
    "performances.title": "Solo fingerstyle kitara za dogodke in lokale.",
    "performances.subtitle":
      "Ponujamo sodobne instrumentalne fingerstyle sete za lokale, zasebne dogodke in koncerte – kot nežna spremljava ali kot poslušalni koncert.",
    "performances.hero.ctaContact": "Povprašaj za termin",
    "performances.stat1Number": "45–90 min",
    "performances.stat1Label": "Tipična dolžina nastopa",
    "performances.stat2Number": "Solo",
    "performances.stat2Label": "Fingerstyle kitara",
    "performances.stat3Number": "Dogodki",
    "performances.stat3Label": "bari in koncerti",
    "performances.cards.events.title": "Krajši nastopi na dogodkih",
    "performances.cards.events.body":
      "Instrumentalne skladbe za otvoritve, podelitve ali pavze med govori – ena ali dve skladbi, ki ustvarita vzdušje, ne da bi zasenčili dogodek.",
    "performances.cards.bars.title": "Glasbena podlaga za bare in restavracije",
    "performances.cards.bars.body":
      "Daljši seti melodične fingerstyle kitare pri pogovorni glasnosti, primerni za vinoteke, kavarne ali sproščene večerne lokale.",
    "performances.cards.concerts.title": "Samostojen koncertni nastop",
    "performances.cards.concerts.body":
      "Celovečerni program avtorskih skladb in priredb, primeren za poslušalne dvorane in manjše odre.",
    "performances.cta.text":
      "Za občutek, kako zvenijo nastopi v živo, je na voljo naš YouTube kanal.",
    "performances.cta.button": "YouTube kanal",

    "footer.copy":
      "© <span id=\"year\"></span> Studio Fingerstyle Kitare – fingerstyle kitare za napredne kitariste.",
    "footer.meta":
      " ",
  },
};

function setLanguage(lang) {
  const dict = translations[lang];
  if (!dict) return;

  document.documentElement.lang = lang === "sl" ? "sl" : "en";

  // Update simple text / HTML nodes
  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (!key || !dict[key]) return;

    // Some strings contain HTML (e.g. with spans)
    el.innerHTML = dict[key];
  });

  // Update placeholders separately
  document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.getAttribute("data-i18n-placeholder");
    if (!key || !dict[key]) return;
    el.setAttribute("placeholder", dict[key]);
  });

  // Update language switch UI
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.classList.toggle("active", btn.dataset.lang === lang);
  });

  // Persist choice
  try {
    localStorage.setItem("site-lang", lang);
  } catch {
    // ignore
  }
}

function initLanguage() {
  let lang = "sl";
  try {
    const stored = localStorage.getItem("site-lang");
    if (stored && translations[stored]) {
      lang = stored;
    }
  } catch {
    // ignore
  }
  setLanguage(lang);
}

function initNav() {
  const toggle = document.querySelector(".nav-toggle");
  const links = document.querySelector(".nav-links");

  if (!toggle || !links) return;

  toggle.addEventListener("click", () => {
    const expanded = toggle.getAttribute("aria-expanded") === "true";
    toggle.setAttribute("aria-expanded", String(!expanded));
    links.classList.toggle("open", !expanded);
  });

  links.addEventListener("click", (event) => {
    if (event.target instanceof HTMLAnchorElement) {
      toggle.setAttribute("aria-expanded", "false");
      links.classList.remove("open");
    }
  });
}

function initSmoothScrolling() {
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", (event) => {
      const href = anchor.getAttribute("href");
      if (!href || href === "#") return;

      const target = document.querySelector(href);
      if (target) {
        event.preventDefault();
        target.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
  });
}

function initContactForm() {
  const forms = document.querySelectorAll("[data-contact-form]");

  if (!forms.length) return;

  forms.forEach((form) => {
    const context = form.getAttribute("data-contact-form") || "contact";
    const success = document.querySelector(
      `[data-contact-success="${context}"]`
    );

    if (!success) return;

    form.addEventListener("submit", (event) => {
      event.preventDefault();

      const formData = new FormData(form);
      const name = formData.get("name") || "";
      const email = formData.get("email") || "";
      const message = formData.get("message") || "";

      const lang = document.documentElement.lang === "sl" ? "sl" : "en";

      const subject =
        lang === "sl"
          ? context === "performances"
            ? "Povpraševanje za nastop (solo fingerstyle kitara)"
            : "Sporočilo s spletne strani (ure ali nastopi)"
          : context === "performances"
          ? "Enquiry about solo fingerstyle performance"
          : "Message from website (lessons or performances)";

      const bodyLines = [
        `Name / Ime: ${name}`,
        `Email: ${email}`,
        `Context / Vprašanje: ${
          context === "performances"
            ? "Performances / Nastopi"
            : "General contact / Splošen kontakt"
        }`,
        "",
        "Message / Sporočilo:",
        `${message}`,
      ];

      const mailto = `mailto:your.email@example.com?subject=${encodeURIComponent(
        subject
      )}&body=${encodeURIComponent(bodyLines.join("\n"))}`;

      window.location.href = mailto;

      success.hidden = false;
      success.textContent =
        lang === "sl"
          ? "Odpre se e‑pošta z vnaprej izpolnjenimi podatki. Po potrebi jih je mogoče dopolniti in poslati."
          : "An email draft opens with the student's details already filled in. The message can be edited before sending.";
    });
  });
}

function initLangButtons() {
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.dataset.lang;
      if (!lang) return;
      setLanguage(lang);
    });
  });
}

function initYear() {
  const yearSpan = document.getElementById("year");
  if (yearSpan) {
    yearSpan.textContent = String(new Date().getFullYear());
  }
}

document.addEventListener("DOMContentLoaded", () => {
  initLanguage();
  initLangButtons();
  initNav();
  initSmoothScrolling();
  initContactForm();
  initYear();
});


